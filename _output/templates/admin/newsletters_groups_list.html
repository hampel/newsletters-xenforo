<xf:title>{{ phrase('newsletters_groups') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('newsletters/groups/add') }}" icon="add">
		{{ phrase('newsletters_add_group') }}
	</xf:button>
</xf:pageaction>


<div class="block">
	<div class="block-outer">
		<xf:macro id="filter_macros::quick_filter" arg-key="groups" arg-class="block-outer-opposite" />
	</div>
	
	<div class="block-container">
		<xf:if is="$groups is not empty">
			<div class="block-body">
				
				<xf:datalist>	
					<xf:foreach loop="$groups" key="$type" value="$groupEntity">	
						<tbody class="dataList-rowGroup">
							<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
								<xf:cell colspan="3">
									<xf:if is="{{ {$typeOptions.{$type}} }}">
										{$typeOptions.{$type}}
									<xf:else />
										{{ phrase('newsletters_groups') }}
									</xf:if>
								</xf:cell>
							</xf:datarow>							
							<xf:foreach loop="$groupEntity" value="$group">					
								<xf:datarow
											label="{$group.name}"
											hint="{{ ($group.GroupBuilder.addon_id && ($group.type == 'programmatic')) ? $group.GroupBuilder.addon_id : '' }}"
											explain="{{ $group.description }}"
											href="{{ link('newsletters/groups/edit', $group) }}"
											delete="{{ link('newsletters/groups/delete', $group) }}"
											data-xf-click="overlay" >
									<xf:action href="{{ link('newsletters/groups/subscribers', $group) }}">{{ phrase('newsletters_subscribers_count_x', {'count': $group.subscriber_count}) }}</xf:action>
								</xf:datarow>
							</xf:foreach>
						</tbody>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals($totalGroups) }}</span>
			</div>
		<xf:else />
			<div class="block-body block-row">{{ phrase('no_results_found') }}</div>
		</xf:if>
	</div>	
</div>